<div class="max-w-[1120px] mx-auto px-4 md:px-10 py-12 font-lato">
  <h1 class="text-3xl font-bold text-center text-brand-strong mb-12">Il tuo Carrello</h1>

  {% if cart.item_count > 0 %}
    <form action="/cart" method="post" novalidate>
      <div class="overflow-x-auto">
        <table class="w-full text-left border-collapse">
          <thead>
            <tr class="border-b border-gray-200">
              <th class="py-4 text-brand-strong font-bold">Prodotto</th>
              <th class="py-4 text-brand-strong font-bold">Prezzo</th>
              <th class="py-4 text-brand-strong font-bold">Quantità</th>
              <th class="py-4 text-brand-strong font-bold text-right">Totale</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart.items %}
              <tr class="border-b border-gray-100">
                <td class="py-4 flex items-center gap-4">
                  <a href="{{ item.url }}">
                    <img src="{{ item.image | img_url: '100x' }}" alt="{{ item.title }}" class="w-20 h-20 object-cover rounded-md" width="80" height="80">
                  </a>
                  <div>
                    <a href="{{ item.url }}" class="font-bold text-brand-strong hover:text-brand-text">{{ item.product.title }}</a>
                    {% unless item.product.has_only_default_variant %}
                      <p class="text-sm text-gray-500">{{ item.variant.title }}</p>
                    {% endunless %}
                  </div>
                </td>
                <td class="py-4 text-brand-strong">{{ item.price | money }}</td>
                <td class="py-4">
                  <input type="number" name="updates[]" id="updates_{{ item.key }}" value="{{ item.quantity }}" min="0" class="w-16 border rounded-md p-2 text-center">
                </td>
                <td class="py-4 text-right font-bold text-brand-strong">
                  {{ item.final_line_price | money }}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="mt-8 flex flex-col items-end border-t border-gray-200 pt-8">
        <div class="flex items-center gap-4 text-xl font-bold text-brand-strong mb-4">
          <span>Subtotale</span>
          <span>{{ cart.total_price | money }}</span>
        </div>
        <p class="text-gray-500 mb-6 text-sm">Tasse e spese di spedizione calcolate al checkout.</p>
        
        <div class="flex gap-4">
          <button type="submit" name="update" class="px-6 py-3 border border-brand-strong text-brand-strong rounded-full hover:bg-gray-50 transition-colors">
            Aggiorna
          </button>
          <button type="submit" name="checkout" class="px-8 py-3 bg-brand-strong text-white rounded-full hover:opacity-90 transition-opacity font-bold">
            Procedi al Checkout
          </button>
        </div>
      </div>
    </form>
  {% else %}
    <div class="text-center py-20">
      <p class="text-xl text-brand-strong mb-8">Il tuo carrello è vuoto.</p>
      <a href="/" class="bg-brand-strong text-white px-8 py-3 rounded-full hover:opacity-90 transition-opacity">
        Continua lo shopping
      </a>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Main Cart",
  "settings": []
}
{% endschema %}
